
#include "ADC12.h"

/******************多通道多次采样(2通道)*******************/
void ADC12_SET_SEQUENCE_REPEATED(uchar inch1,uchar inch2){
//	REFCTL0&=~REFMSTR;
	ADC12CTL0 = ADC12ON+ADC12MSC+ADC12SHT0_8;	// Turn on ADC12,set sample-and-hold time 16*ADC12CLK
												// set multiple sample conversion
	//ADC12SHT0,对应A0~A7通道的采样时间。   ADC12SHT1，对应A8~A15通道的采样时间。
	//注意：在选择通道时，注意通道的采样时间ADC12SHT0和ADC12SHT1的选择。
	ADC12CTL1 = ADC12SHP+ADC12CONSEQ_3+ADC12SSEL_3;
												// Select sample-and-hold pulse-mode
												// Repeated-sequence-of-channels
												// ADC12CLK SMCLK
//    ADC12MCTL0=ADC12SREF_1;
	//------------inch1 (the first channel)----------------
	switch(inch1){
	case ADC12_INCH0:
		//ADC12CTL1 &= ~(ADC12CSTARTADD3+\
						ADC12CSTARTADD2+\
						ADC12CSTARTADD1+\
						ADC12CSTARTADD0);
		ADC12MCTL0 = ADC12INCH_0;				// ref+ = AVcc, channel = A0
		break;
	case ADC12_INCH1:
		ADC12CTL1 |= ADC12CSTARTADD0;			// conversion starts from channel 1
		ADC12MCTL1 = ADC12INCH_1;				// ref+ = AVcc, channel = A1
		break;
	case ADC12_INCH2:
		ADC12CTL1 |= ADC12CSTARTADD1;
		ADC12MCTL2 = ADC12INCH_2;
		break;
	case ADC12_INCH3:
		ADC12CTL1 |= ADC12CSTARTADD1+ADC12CSTARTADD0;
		ADC12MCTL3 = ADC12INCH_3;
		break;
	case ADC12_INCH4:
		ADC12CTL1 |= ADC12CSTARTADD2;
		ADC12MCTL4 = ADC12INCH_4;
		break;
	case ADC12_INCH5:
		ADC12CTL1 |= ADC12CSTARTADD2+ADC12CSTARTADD0;
		ADC12MCTL5 = ADC12INCH_5;
		break;
	case ADC12_INCH6:
		ADC12CTL1 |= ADC12CSTARTADD2+ADC12CSTARTADD1;
		ADC12MCTL6 = ADC12INCH_6;
		break;
	case ADC12_INCH7:
		ADC12CTL1 |= ADC12CSTARTADD2+ADC12CSTARTADD1+ADC12CSTARTADD0;
		ADC12MCTL7 = ADC12INCH_7;
		break;
	case ADC12_INCH8:
		ADC12CTL1 |= ADC12CSTARTADD3;
		ADC12MCTL8 = ADC12INCH_8;
		break;
	case ADC12_INCH9:
		ADC12CTL1 |= ADC12CSTARTADD3+ADC12CSTARTADD0;
		ADC12MCTL9 = ADC12INCH_9;
		break;
	case ADC12_INCH10:
		ADC12CTL1 |= ADC12CSTARTADD3+ADC12CSTARTADD1;
		ADC12MCTL10 = ADC12INCH_10;
		break;
	case ADC12_INCH11:
		ADC12CTL1 |= ADC12CSTARTADD3+ADC12CSTARTADD1+ADC12CSTARTADD0;
		ADC12MCTL11 = ADC12INCH_11;
		break;
	case ADC12_INCH12:
		ADC12CTL1 |= ADC12CSTARTADD3+ADC12CSTARTADD2;
		ADC12MCTL12 = ADC12INCH_12;
		break;
	case ADC12_INCH13:
		ADC12CTL1 |= ADC12CSTARTADD3+ADC12CSTARTADD2+ADC12CSTARTADD0;
		ADC12MCTL13 = ADC12INCH_13;
		break;
	case ADC12_INCH14:
		ADC12CTL1 |= ADC12CSTARTADD3+ADC12CSTARTADD2+ADC12CSTARTADD1;
		ADC12MCTL14 = ADC12INCH_14;
		break;
	case ADC12_INCH15:
		ADC12CTL1 |= ADC12CSTARTADD3+ADC12CSTARTADD2+ADC12CSTARTADD1+ADC12CSTARTADD0;
		ADC12MCTL15 = ADC12INCH_15;
		break;
	default: break;
	}

	//------------inch2 (the last channel)-------------------
	switch(inch2){
	case ADC12_INCH0:
		//ADC12CTL1 &= ~(ADC12CSTARTADD3+\
						ADC12CSTARTADD2+\
						ADC12CSTARTADD1+\
						ADC12CSTARTADD0);
		ADC12MCTL0 = ADC12INCH_0+ADC12EOS;		// ref+ = AVcc, channel = A0
		ADC12IE = ADC12IE0;						// Enable ADC12IFG.0
		break;
	case ADC12_INCH1:
		ADC12MCTL1 = ADC12INCH_1+ADC12EOS;		// ref+ = AVcc, channel = A1
		ADC12IE = ADC12IE1;						// Enable ADC12IFG.1
		break;
	case ADC12_INCH2:
		ADC12MCTL2 = ADC12INCH_2+ADC12EOS;
		ADC12IE = ADC12IE2;
		break;
	case ADC12_INCH3:
		ADC12MCTL3 = ADC12INCH_3+ADC12EOS;
		ADC12IE = ADC12IE3;
		break;
	case ADC12_INCH4:
		ADC12MCTL4 = ADC12INCH_4+ADC12EOS;
		ADC12IE = ADC12IE4;
		break;
	case ADC12_INCH5:
		ADC12MCTL5 = ADC12INCH_5+ADC12EOS;
		ADC12IE = ADC12IE5;
		break;
	case ADC12_INCH6:
		ADC12MCTL6 = ADC12INCH_6+ADC12EOS;
		ADC12IE = ADC12IE6;
		break;
	case ADC12_INCH7:
		ADC12MCTL7 = ADC12INCH_7+ADC12EOS;
		ADC12IE = ADC12IE7;
		break;
	case ADC12_INCH8:
		ADC12MCTL8 = ADC12INCH_8+ADC12EOS;
		ADC12IE = ADC12IE8;
		break;
	case ADC12_INCH9:
		ADC12MCTL9 = ADC12INCH_9+ADC12EOS;
		ADC12IE = ADC12IE9;
		break;
	case ADC12_INCH10:
		ADC12MCTL10 = ADC12INCH_10+ADC12EOS;
		ADC12IE = ADC12IE10;
		break;
	case ADC12_INCH11:
		ADC12MCTL11 = ADC12INCH_11+ADC12EOS;
		ADC12IE = ADC12IE11;
		break;
	case ADC12_INCH12:
		ADC12MCTL12 = ADC12INCH_12+ADC12EOS;
		ADC12IE = ADC12IE12;
		break;
	case ADC12_INCH13:
		ADC12MCTL13 = ADC12INCH_13+ADC12EOS;
		ADC12IE = ADC12IE13;
		break;
	case ADC12_INCH14:
		ADC12MCTL14 = ADC12INCH_14+ADC12EOS;
		ADC12IE = ADC12IE14;
		break;
	case ADC12_INCH15:
		ADC12MCTL15 = ADC12INCH_15+ADC12EOS;
		ADC12IE = ADC12IE15;
		break;
	default: break;
	}

	ADC12CTL0 |= ADC12ENC;						// Enable conversion
	ADC12CTL0 |= ADC12SC;						// Start conversion
}

